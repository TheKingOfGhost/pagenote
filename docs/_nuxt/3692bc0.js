(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{321:function(e,t,n){"use strict";n.r(t);var o=n(322),r=n.n(o);for(var d in o)["default"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(d);t.default=r.a},322:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),d=o(n(357));t.default=r.default.extend({name:"Search",props:{propA:{type:Object}},data:function(){return Object.assign(Object.assign({},{pagination:{total:0,limit:0,pages:0},pages:[]}),{keywords:"pagenote",currentPage:0})},methods:{searchByKeyword:function(){var e=this,t=this.keywords,n={deleted:!1,$or:[{text:{$like:t}},{domain:{$like:t}},{tip:{$like:t}},{context:{$like:t}},{categories:{$like:t}}]},o=this.pagination;d.default.lightpage.getLightPages({limit:o.limit,skip:this.currentPage*o.limit,query:n}).then((function(t){console.log("拉取结果",t),t.success&&(e.pages=t.data.pages,e.pagination=t.data.pagination)}))}},computed:{},mounted:function(){this.searchByKeyword()}})},323:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.frontApi=t.localdir=t.user=t.action=t.browserAction=t.setting=t.lightpage=t.boxroom=void 0,function(e){e.id="boxroom"}(t.boxroom||(t.boxroom={})),function(e){e.id="lightpage"}(t.lightpage||(t.lightpage={})),function(e){e.id="setting",function(e){e.markdown="markdown"}(e.SchemaType||(e.SchemaType={}))}(t.setting||(t.setting={})),function(e){e.id="browserAction",function(e){e.enable="images/light-32.png",e.disable="images/light-disable.png"}(e.ActionImageType||(e.ActionImageType={}))}(t.browserAction||(t.browserAction={})),function(e){e.id="action"}(t.action||(t.action={})),function(e){e.id="user"}(t.user||(t.user={})),function(e){e.id="localdir"}(t.localdir||(t.localdir={})),function(e){e.id="front-server"}(t.frontApi||(t.frontApi={}))},336:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS=void 0,function(e){e.UN_READY="0",e.READY="1",e.STOP="-1"}(o||(o={})),t.STATUS=o},357:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r,d=o(n(358)),c=o(n(359)),l=o(n(360)).default((function(e,t){return function(t){if(!r){var n="page_bridge";r=chrome&&chrome.runtime?new d.default(n,{asServer:!0,isBackground:!1,timeout:5e3}):new c.default(n,{asServer:!0,listenKey:"pagenote-message",timeout:8e3})}return r.requestMessage(e,t)}}));t.default=l},358:function(e,t,n){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(336),d={};var c=function(){function e(e,t){if(this.listeners={},d[e])throw console.error(e,"已存在，不可创建"),Error("该ID已存在");d[e]=!0,this.option=t||{asServer:!0,timeout:8e3,isBackground:!0},this.clientId=e,this.state=r.STATUS.UN_READY,this.proxy=function(){return!1},this.option.asServer&&this.startListen()}return e.prototype.startListen=function(){var e=this;chrome.runtime.onMessage.addListener((function(t,n,d){if(e.state!==r.STATUS.READY)return!1;var data=t.data,c=t.type,l=t.header,header=void 0===l?{senderClientId:"",originClientId:"",targetClientId:"",keepConnection:!1,isResponse:!1}:l,f=header.senderClientId,h=header.originClientId,v=header.targetClientId,m=header.isResponse,y=v||e.option.targetClientId;if(y&&y!==e.clientId)return!1;var w,I,S=e.listeners[c],P=o(o({},n),{header:{originClientId:h,senderClientId:f,targetClientId:f,isResponse:m}});return S&&"function"==typeof S&&(w=S(data,P,d)),"function"==typeof e.proxy&&(w=e.proxy(t,P,d)),w="object"==typeof(I=w)&&null!==I&&"then"in I&&"catch"in I||!1!==w,header.keepConnection||w})),this.state=r.STATUS.READY},e.prototype.stopListen=function(){this.state=r.STATUS.STOP},e.prototype.addListener=function(e,t){return this.listeners[e]=t,this},e.prototype.addProxy=function(e){this.proxy=e},e.prototype.requestMessage=function(e,data,header){var t,n={type:e,data:data,header:{targetClientId:(null==header?void 0:header.targetClientId)||this.option.targetClientId||"",originClientId:(null==header?void 0:header.originClientId)||this.clientId,senderClientId:this.clientId,isResponse:!1,keepConnection:null==header?void 0:header.keepConnection}},o=new Promise((function(e,n){t=e})),r=setTimeout((function(){t({success:!1,error:{reason:"timeout",request:n},data:null}),console.warn("timeout",n)}),(null==header?void 0:header.timeout)||this.option.timeout),d=function(data){clearTimeout(r),t(data)};if(this.option.isBackground){var c=null==header?void 0:header.targetTabId;c?chrome.tabs.sendMessage(c,n,d):chrome.tabs.query({active:!0,currentWindow:!0},(function(e){var t,o=null===(t=e[0])||void 0===t?void 0:t.id;if(!o)throw Error("未找到当前激活tab页");chrome.tabs.sendMessage(o,n,d)}))}else chrome&&chrome.runtime?chrome.runtime.sendMessage(n,d):d({success:!1,error:"插件不可用",data:null});return o},e.prototype.responseMessage=function(e,data,header){console.error("extension 无需实现")},e}();t.default=c},359:function(e,t,n){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(336),d="storage";function c(e,t){var n=JSON.stringify(t);try{window.sessionStorage.setItem(e,n)}catch(e){console.warn("信息超载，可能通讯失败")}var o=new Event(d);o.key=e,o.newValue=n,window.dispatchEvent(o)}function l(e){window.sessionStorage.setItem(e,"")}var f=function(){function e(e,option){this.proxy=function(){return!1},this.state=r.STATUS.UN_READY,this.clientId=e,this.option=option,this.listeners={},this.startListen(),this.state=r.STATUS.READY}return e.prototype.responseMessage=function(e,data,header){throw new Error("Method not implemented.")},e.prototype.startListen=function(){var e=this,t=this.option.listenKey;window.addEventListener(d,(function(n){var r;try{var d="";if(!(d=n.key===t&&n.newValue?n.newValue:sessionStorage.getItem(t)||""))return;r=JSON.parse(d)}catch(e){return}var f=r||{},header=f.header,h=f.type,data=f.data;if(header&&h&&!(header.targetClientId&&header.targetClientId!==e.clientId||header.senderClientId===e.clientId||!1===header.isResponse&&!0!==e.option.asServer)){var v=function(data){var t={data:data,header:o(o({},header),{isResponse:!0,originClientId:header.originClientId,targetClientId:header.senderClientId,senderClientId:e.clientId}),type:h};c(e.option.listenKey,t)},m={header:header},y=header.funId||"",w=e.listeners[y]||e.listeners[h];w?(w(data,m,v),l(t)):e.proxy&&(e.proxy(r,m,v),l(t))}}))},e.prototype.addListener=function(e,t){return this.listeners[e]=t,this},e.prototype.addProxy=function(e){this.proxy=e},e.prototype.requestMessage=function(e,data,header){var t,n=new Promise((function(e){t=e})),o=e+Date.now()+Math.random(),r=setTimeout((function(){t({success:!1,error:"timeout",data:null})}),(null==header?void 0:header.timeout)||this.option.timeout),d=this;this.addListener(o,(function(e){delete d.listeners[o],clearTimeout(r),t(e)}));var l=(null==header?void 0:header.targetClientId)||this.option.targetClientId||"",f={data:data,header:{originClientId:this.clientId,senderClientId:this.clientId,targetClientId:l,funId:(null==header?void 0:header.funId)||o,isResponse:!0===(null==header?void 0:header.isResponse),hostname:window.location.hostname},type:e};return c(this.option.listenKey,f),n},e.prototype.stopListen=function(){this.state=r.STATUS.STOP},e}();t.default=f},360:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(323),r=function(){return Promise.resolve({success:!1,error:"not allowed",data:void 0})};t.default=function(e){return{lightpage:{exportPages:e("exportPages",o.lightpage.id),importPages:e("importPages",o.lightpage.id),removeLightPages:e("removeLightPages",o.lightpage.id),getLightPageDetail:e("getLightPageDetail",o.lightpage.id),getLightPages:e("getLightPages",o.lightpage.id),groupPages:e("groupPages",o.lightpage.id),removeLightPage:e("removeLightPage",o.lightpage.id),saveLightPage:e("saveLightPage",o.lightpage.id)},boxroom:{update:e("update",o.setting.id),get:e("get",o.setting.id),remove:e("remove",o.setting.id),save:e("save",o.setting.id)},setting:{getSetting:e("getSetting",o.setting.id),getUserSetting:e("getUserSetting",o.setting.id),resetSetting:e("resetSetting",o.setting.id),saveSetting:e("saveSetting",o.setting.id),syncSetting:e("syncSetting",o.setting.id)},browserAction:{setBrowserActionClick:r,setBrowserActionDisplay:e("setBrowserActionDisplay",o.action.id),getBrowserActionInfo:e("getBrowserActionInfo",o.action.id)},commonAction:{report:e("report",o.action.id),getMemoryRuntime:e("getMemoryRuntime",o.action.id),setMemoryRuntime:e("setMemoryRuntime",o.action.id),usage:e("usage",o.action.id),injectToFrontPage:e("injectToFrontPage",o.action.id),copyToClipboard:e("copyToClipboard",o.action.id),captureView:e("captureView",o.action.id),axios:e("axios",o.action.id),injectCodeToPage:e("injectCodeToPage",o.action.id),track:e("track",o.action.id)},fileSystem:{readPagesFrontDir:e("readPagesFrontDir",o.localdir.id),requestPermission:e("requestPermission",o.localdir.id)}}}},383:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var o=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n  仅支持 0.21.0 以上版本\n")])},r=[]},390:function(e,t,n){"use strict";n.r(t);var o=n(383),r=n(321);for(var d in r)["default"].indexOf(d)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(d);var c=n(76),component=Object(c.a)(r.default,o.a,o.b,!1,null,null,null);t.default=component.exports}}]);